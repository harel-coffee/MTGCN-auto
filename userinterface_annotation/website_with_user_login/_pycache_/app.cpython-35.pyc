

‚Äì‚Äô√â]j(  √£            
   @   s√°  d  d l  m Z m Z m Z m Z m Z m Z m Z m Z d  d l	 Z
 d  d l Z d  d l Z d  d l
 m Z d Z e e ∆í Z d e _ g  Z d d d d	 d
 d d d
 d d i Z g  Z g  Z d d ‚Äû  Z d d ‚Äû  Z d d ‚Äû  Z e j d d d d g ∆íe d d ‚Äû  ∆í ∆í Z e j d ∆í d d ‚Äû  ∆í Z e j d d d d g ∆íe d  d! ‚Äû  ∆í ∆í Z e j d" ∆í e d# d$ ‚Äû  ∆í ∆í Z e j d% d d d g ∆íe d& d' ‚Äû  ∆í ∆í Z e j  d( ∆í d) d* ‚Äû  ∆í Z! e d+ k r√ùe j" d, d- ∆í d S).√©    )√öFlask√örender_template√örequest√öurl_for√öredirect√ösession√öabort√öflashN)√öwrapsz1/home/chinni/PycharmProjects/Honours/miniproject/ZcharanZuser1Z1001Zuser2Z2002Zuser3Z3003Zuser4Z4004Zuser5Z5005c             C   s5   x. t  D]& } | |  k r t  | | k r d Sq Wd S)NZcorrect√ö	incorrect)√ö	user_dict)√öusername√öpasswd√öl¬© r   √∫\/home/chinni/PycharmProjects/Honours/userinterface_annotation/Website_with_user_login/app.py√öcheck_userlogins&   s    
r   c                s"   t  ÀÜ  ∆í ‚Ä°  f d d ‚Ä†  ∆í } | S)Nc                 sf   t  d |  | ∆í t  ÀÜ  ∆í t d rH t d | d k rb ÀÜ  |  | ≈Ω  Sn t d ∆í t t d ∆í ∆í Sd  S)Nzargs,kwargs√öloginr
   zYou need to login first√öindex)√öprintr   r	   r   r   )√öargs√ökwargs)√öfr   r   √öwrap-   s    


zlogin_required.<locals>.wrap)r
   )r   r   r   )r   r   √ölogin_required,   s    
r   c                s"   t  ÀÜ  ∆í ‚Ä°  f d d ‚Ä†  ∆í } | S)Nc                 s[   d t  k r ÀÜ  |  | ≈Ω  Sd t  k r= t  d r= ÀÜ  |  | ≈Ω  St t d d t  d ∆í∆í Sd  S)Nr   √ögenrer
   )r   r   r   )r   r   )r   r   r   r   =   s
    

zlogout_required.<locals>.wrap)r
   )r   r   r   )r   r   √ölogout_required<   s    
r   √∫/√ömethods√öPOST√öGETc              C   s¬π   d  }  d t  k r6 t  d r6 t t d d t  d ∆í∆í t j d k r¬© t t j d t j d ∆í d k rq d }  n8 d t  d <t j d t  d <t t d d t j d ∆í∆í St d	 d
 |  ∆íS)Nr   r   r
   r   √öpasswordr   z%Invalid Credentials,Please try again.Tz	main.html√öerror)r   r   r   r   √ömethodr   √öformr   )r"   r   r   r   r   J   s    #	
r   z/logout/c              C   s|   yB t  d r1 t  d d k r1 d t  d <d t  d <t t d ∆í ∆í SWn3 t k
 rw }  z t |  ∆í d SWYd  d  }  ~  Xn Xd  S)Nr   r
   √ö Fr   Zhello)r   r   r   √ö	Exceptionr   )√öer   r   r   √ölogout^   s    


r(   z/<username>/c             C   s√á   y¬ç |  d k r d Sd  } t  d r≈í t  d |  k r≈í g  } | j t |  ∆í ∆í | j t t j t t |  ∆í ∆í ∆í d ∆í t d d | d | ∆íSWn3 t k
 r√Ç } z t	 | ∆í d	 SWYd  d  } ~ Xn Xd  S)
Nzfavicon.icoZfavir   r
   √©   z
Genre.htmlZ
genre_foldersr"   z*Please login agian,some error has happened)
r   √öappend√östr√önext√öos√öwalk√öurl_pathr   r&   r   )r
   r"   √ö	GenreListr'   r   r   r   r   l   s    *
r   z/<username>/<genre>/c             C   s√Ç   y≈í t  d r‚Äπ t  d |  k r‚Äπ |  } g  } | j | ∆í | j | ∆í | j t t j t t | ∆í d t | ∆í ∆í ∆í d ∆í t d d | ∆íSWn/ t k
 r¬Ω } z t	 | ∆í WYd  d  } ~ Xn Xd S)Nr   r
   r   √©   z
Files.htmlZlistoffilesZherl)
r   r*   r,   r-   r.   r/   r+   r   r&   r   )r
   r   √öfolderZ
Files_listr'   r   r   r   √öfile‚Ç¨   s    

8r3   z/<username>/<genre>/<file>/c             C   s¬Å  y√∫t  d s t t d ∆í ∆í St j d k r√≥d | k r√≤ t t |  ∆í d t | ∆í d t | ∆í } d d d d	 d
 d d g } t j | d
 d d | d d  ∆í} t j	 d dH ∆í | d j j
 ∆í  | d <t d d | j d d ∆í g d | j
 j ∆íSd t  d <g  } t t |  ∆í d t | ∆í d t | ∆í } t j | d
 d ∆í} | d } | d } x^ t d t | ∆í ∆í D]G }	 | j |	 d f d k r≈°|	 t  d <Pqm|	 t | ∆í d k rmd SqmWt t  d d |  ∆í t | ∆í t  d }
 t  d t | ∆í k  s√∫d Sx√ö t t  d t  d d ∆í D]¬Ω } d d d  d! d" g d d# d$ d% d& d' g d	 d( d' g d
 d( d' g d d( d' g d) d* i } | t | ∆í k r‚Ä†P| j | }
 | j | } | j d) |
 i ∆í | j d+ | i ∆í | j | ∆í qWt d, d- | d. |  d/ |
 ∆íSg  } g  } g  } g  } g  } g  } g  } t t j d0 ∆í } xbt d | d ∆í D]M} y| j t j j d1 t | ∆í ∆í d ∆í | j t j j d2 t | ∆í ∆í d ∆í | j t j j d3 t | ∆í ∆í d ∆í | j t j j d4 t | ∆í ∆í d ∆í | j t j j d5 t | ∆í ∆í d ∆í | j t j j d6 t | ∆í ∆í d ∆í | j t j j d7 t | ∆í ∆í d ∆í WqDt k
 r¬ê} z t | ∆í WYd  d  } ~ XqDXqDWt t |  ∆í d t | ∆í d t | ∆í } t t |  ∆í d t | ∆í d t d8 | ∆í } t j | d
 d ∆í} | d } | d } d } t t  d d9 |  ∆í g  } x‚Ä† t t  d t  d | ∆í D]i } | t | ∆í k roP| | d: k r‚Ä¢d; | j | d f <n d | j | d f <| d } | j | ∆í qVWd< | d | d= | d> | d? | d@ | dA | dB | i } t j | dC d< d d= d> d? d@ dA dB g ∆í} t | dD ∆í ¬è  } | j | d dE d dE ∆íWd  QRX| j | d dE ∆íg  } x^ t d t | ∆í ∆í D]G }	 | j |	 d f d k r¬¥|	 t  d <Pq‚Ä°|	 t | ∆í d k r‚Ä°d Sq‚Ä°Wt | ∆í t  d }
 t  d t | ∆í k  r√µx√ö t t  d t  d d ∆í D]¬Ω } d d d  d! d" g d d# d$ d% d& d' g d	 d( d' g d
 d( d' g d d( d' g d) d* i } | t | ∆í k rÀÜP| j | }
 | j | } | j d) |
 i ∆í | j d+ | i ∆í | j | ∆í qWt d, d- | d. |  d/ |
 ∆íSdF SWn‚Ç¨ t k
 r|} z` t | ∆í g  } | j |  ∆í | j t t j t |  ∆í ∆í d ∆í t t dG d. t  d. ∆í∆í SWYd  d  } ~ Xn Xd  S)INr   r   r    Z	Annotatedr   ZSentenceZ	SentimentZEmotionZ
HatespeechZ	ClickbaitZSarcasmZTextBox√ö	delimiter√∫,√önames√öheaderZmax_colwidthr)   zresults.html√ötables√öclasses√ödataZtitlesr   √öitem√ökey√öcheckedzsentences are completedzGET Request√©   √öpos√önegZneutral√öcompZhappyZsadZangerZfear√öno√öyesZsentencer%   √ö	key_valuezViewsentences.htmlZlist_sentencesr
   Znum_remZlength_sentencesZ
sentence_nameZsentiment_optionZemotion_optionZhatespeech_optionZclickbait_optionZsarcasm_optionZ	text_dataZ
Annotated_zPOST Request√öNoner1   ZIdZ	sentimentZemotionZ
hatespeechZ	clickbaitZsarcasmZtextbox√öcolumns√öaFzSentences are completedr   √©√ø√ø√ø√ø) r   r   r   r   r#   r/   r+   √öpdZread_csvZ
set_option√östripr   Zto_htmlrF   √övalues√örange√ölenZatr   √öloc√öupdater*   √öintr$   √ögetlistr&   Z	DataFrame√öopenZto_csvr,   r-   r.   )r
   r   r3   √ö	file_pathZ
title_listZdfZlis√ö	sentences√ökeys√öiZnum_rem_sentences√ök√öoptions√örowr<   Z
lis_sentencesZsentiment_responseZemotion_responseZhatespeech_responseZclickbait_responseZsarcasm_responseZ
text_response√ölengthr'   Z
new_file_path√öpZlis_id√örecordZ	dataframer   r0   r   r   r   rT   ¬ê   s√¢    
,!+
,


"W

''''''+!,0

"
- 
"



$rT   i‚Äù  c             C   s
   t  d ∆í S)Nz404.html)r   )r'   r   r   r   √öpage_not_found  s    r]   √ö__main__√öhostz0.0.0.0)#√öflaskr   r   r   r   r   r   r   r	   ZpandasrI   Zcsvr-   √ö	functoolsr
   r/   √ö__name__√öapp√ö
secret_keyZlist_genresr   Zuser_loginsZ	user_datar   r   r   √örouter   r(   r   r3   rT   √öerrorhandlerr]   √örunr   r   r   r   √ö<module>   s4   :	$¬Å
